const mqtt = require('mqtt');

// MQTT Broker (e.g., Mosquitto) connection options
const brokerUrl = 'mqtt://localhost'; // Update with your MQTT broker URL
const options = {
  clientId: 'mqttjs_' + Math.random().toString(16).substr(2, 8),
};

// Connect to MQTT broker
const client = mqtt.connect(brokerUrl, options);

// Subscribe to a topic
client.on('connect', () => {
  console.log('Connected to MQTT broker');
  client.subscribe('esp8266/data', (err) => {
    if (!err) {
      console.log('Subscribed to esp8266/data');
    }
  });
});

// Handle incoming messages
client.on('message', (topic, message) => {
  console.log('Received message on topic:', topic, 'with message:', message.toString());
});